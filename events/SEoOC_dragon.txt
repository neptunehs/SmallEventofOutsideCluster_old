namespace = nep_dragon

#Create cluster,portal
country_event = {
	id = nep_dragon.1
	title = "nep_dragon.1.name"
	desc = "nep_dragon.1.desc"	
	picture = GFX_evt_black_hole
		
	fire_only_once = yes
	
	trigger = {
		is_ai = no
		has_country_flag = nep_highway_founder
		has_global_flag = nep_highway_used
		has_global_flag = seal_evil_country_created
		event_target:seal_evil_country = {
			num_fleets < 1
		}
	}
	
	mean_time_to_happen = {
		days = 90
	}
	
	immediate = {
		#cluster
		set_spawn_system_batch = begin
		no_scope = {
			spawn_system = {
				min_distance >= 550
				max_distance <= 560
				min_orientation_angle = 133
				max_orientation_angle = 135
				hyperlane = no
				initializer = nep_Aemethms_init
			}
		}
		random_system = {
			limit = {
				has_star_flag = nep_dragon_system
			}
			save_global_event_target_as = nep_dragon_system
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = 0
				max_orientation_angle = 0
				hyperlane = no
				initializer = nep_Auriel_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -51.42
				max_orientation_angle = -51.42
				hyperlane = no
				initializer = nep_Gabriel_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -102.85
				max_orientation_angle = -102.85
				hyperlane = no
				initializer = nep_Sabriel_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -154.28
				max_orientation_angle = -154.28
				hyperlane = no
				initializer = nep_Samuel_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -205.71
				max_orientation_angle = -205.71
				hyperlane = no
				initializer = nep_Michael_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -257.14
				max_orientation_angle = -257.14
				hyperlane = no
				initializer = nep_Jauiel_init
			}
			spawn_system = {
				min_distance >= 20
				max_distance <= 20
				min_orientation_angle = -308.57
				max_orientation_angle = -308.57
				hyperlane = no
				initializer = nep_Anael_init
			}
		}
		random_system = {
			limit = { has_star_flag = nep_Auriel_system }
			save_event_target_as = nep_heptagram_system_1
		}
		random_system = {
			limit = { has_star_flag = nep_Gabriel_system }
			save_event_target_as = nep_heptagram_system_2
		}
		random_system = {
			limit = { has_star_flag = nep_Sabriel_system }
			save_event_target_as = nep_heptagram_system_3
		}
		random_system = {
			limit = { has_star_flag = nep_Samuel_system }
			save_event_target_as = nep_heptagram_system_4
		}
		random_system = {
			limit = { has_star_flag = nep_Michael_system }
			save_global_event_target_as = nep_heptagram_system_5
		}
		random_system = {
			limit = { has_star_flag = nep_Jauiel_system }
			save_event_target_as = nep_heptagram_system_6
		}
		random_system = {
			limit = { has_star_flag = nep_Anael_system }
			save_event_target_as = nep_heptagram_system_7
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_1
			to = event_target:nep_heptagram_system_2
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_2
			to = event_target:nep_heptagram_system_3
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_3
			to = event_target:nep_heptagram_system_4
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_4
			to = event_target:nep_heptagram_system_5
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_6
			to = event_target:nep_heptagram_system_5
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_6
			to = event_target:nep_heptagram_system_7
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_1
			to = event_target:nep_heptagram_system_7
		}
		
		add_hyperlane = {
			from = event_target:nep_heptagram_system_1
			to = event_target:nep_heptagram_system_3
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_3
			to = event_target:nep_heptagram_system_5
		}		
		add_hyperlane = {
			from = event_target:nep_heptagram_system_5
			to = event_target:nep_heptagram_system_7
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_7
			to = event_target:nep_heptagram_system_2
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_2
			to = event_target:nep_heptagram_system_4
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_4
			to = event_target:nep_heptagram_system_6
		}
		add_hyperlane = {
			from = event_target:nep_heptagram_system_1
			to = event_target:nep_heptagram_system_6
		}
		set_spawn_system_batch = end
		
		#portal
		event_target:nep_seal_system = {
			spawn_natural_wormhole = {
				bypass_type = nep_sealportal
				orbit_distance = 100
				orbit_angle = -135
			}
		}
		event_target:nep_heptagram_system_5 = {
			spawn_natural_wormhole = {
				bypass_type = nep_sealportal
				orbit_distance = 200
				orbit_angle = 135
			}
			link_wormholes = event_target:nep_seal_system
		}
	}
	
	option = {
		name = nep_dragon.1.a
		add_research_option = tech_sealportal_dive
		set_global_flag = nep_dragon_begin
		set_country_flag = nep_dragon_founder #...in future
	}
	
	option = {
		name = nep_dragon.1.b
#		hidden_effect = { country_event = { id = { nep_finalweapon.X  years = 50 random = 10} } }
	}
}


country_event = {
	id = nep_dragon.2
	title = "nep_dragon.2.name"
	desc = "nep_dragon.2.desc"	
	picture = GFX_evt_black_hole
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = nep_dragon_begin
		has_country_flag = nep_dragon_founder
		has_technology = tech_sealportal_dive
		event_target:nep_heptagram_system_5 = {
			any_ship_in_system = {
				owner = root
			}
		}
	}

	immediate = {
		
	}
	
	option = {
		name = nep_dragon.2.a
		begin_event_chain = {
			event_chain = "nep_heptagram_chain"
			target = THIS
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Auriel_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Gabriel_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Sabriel_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Samuel_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Michael_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Jauiel_planet
			owner = THIS.owner
		}
		enable_special_project = {
			name = "nep_dragon_shielded_planet"
			location = event_target:nep_Anael_planet
			owner = THIS.owner
		}
	}
}

ship_event = {
	id = nep_dragon.3
	title = "nep_dragon.3.name"
	desc = "nep_dragon.3.desc"	
	picture = GFX_evt_gaia_planet
	
	is_triggered_only = yes	
	
	fire_only_once = yes
		
	immediate = {
		solar_system = {
			switch = {
				trigger = has_star_flag
				nep_Auriel_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Gabriel_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Sabriel_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Samuel_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Michael_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Jauiel_system = { root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Anael_planet
					}
				} } }
				nep_Anael_system = {  root = { owner = {
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Auriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Gabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Sabriel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Samuel_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Michael_planet
					}
					abort_special_project = {
						name = "nep_dragon_shielded_planet"
						location = event_target:nep_Jauiel_planet
					}
				} } }
			}
		}
	}
	
	option = {
		name = nep_dragon.3.a
		owner = {
			end_event_chain = "nep_heptagram_chain"
		}
		hidden_effect = {
			event_target:nep_Auriel_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Auriel_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Gabriel_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Gabriel_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Sabriel_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Sabriel_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Samuel_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Samuel_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Michael_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Michael_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Jauiel_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Jauiel_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
			event_target:nep_Anael_planet = {
				change_pc = pc_gaia
				set_planet_entity = {
					entity = "gaia_planet_01_entity"
				}
				set_planet_flag = fallen_empire_world
				add_modifier = {
					modifier = "nep_Anael_modifier"
					days = -1
				}
				random_tile = {
					limit = { 
						has_blocker = no 
						has_building = no 
						num_adjacent_tiles = 2 
					}
					set_building = "nep_ruin_temple"
				}
			}
		}
	}
	option = {
		name = nep_dragon.3.b
#		hidden_effect = { country_event = { id = { nep_finalweapon.X  years = 50 random = 5} } }
	}
}

#Legnahcras appears
country_event = {
	id = nep_dragon.4
	title = "nep_dragon.4.name"
	desc = "nep_dragon.4.desc"	
	picture = GFX_evt_ground_combat
		
	fire_only_once = yes

	trigger = {
		is_ai = no
		has_global_flag = nep_dragon_begin
		has_country_flag = nep_dragon_founder
		AND = {
			location = event_target:nep_Auriel_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Gabriel_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Sabriel_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Samuel_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Michael_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Jauiel_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
			location = event_target:nep_Anael_planet = {
				owner = { has_country_flag = nep_dragon_founder }
				has_building = nep_dragon_temple
			}
		}
	}
	
	mean_time_to_happen = {
		days = 360
	}

	immediate = {
		create_country = {
			name = "Legnahcras"
			type = nep_Legnahcras_country
			auto_delete = no
			effect = {
				establish_communications_no_message = root.owner
			}
		}
		last_created_country = {
			set_country_flag = Legnahcras_country
			save_global_event_target_as = Legnahcras_country
		}
		event_target:nep_Auriel_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Gabriel_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Sabriel_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Samuel_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Michael_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Jauiel_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}		
		event_target:nep_Anael_planet = {
			while = {
				count = 12
				create_army = {
					name = "Legnahcras existences"
					owner = last_created
					type = nep_Legnahcras_defensive_army
				}
			}
		}
	}
	option = {
		name = nep_dragon.4.a
	}
}

#research
country_event = {
	id = nep_dragon.5
	title = "nep_dragon.5.name"
	desc = "nep_dragon.5.desc"
	picture = GFX_evt_victorious_army
	
	fire_only_once = yes
	
	trigger = {
		is_ai = no
		has_global_flag = nep_dragon_begin
		has_country_flag = nep_dragon_founder
		event_target:Legnahcras_country = {
			num_armies < 1
		}
	}
	
	option = {
		name = nep_dragon.5.a
		begin_event_chain = {
			event_chain = "nep_dragon_chain"
			target = THIS
		}
		enable_special_project = {
			name = "nep_Legnahcras_research"
			location = capital_scope
			owner = ROOT
		}		
	}
	option = {
		name = nep_dragon.5.b
#		hidden_effect = { country_event = { id = { nep_finalweapon.X  years = 45 random = 5} } }
	}
}

#Dragon appear
country_event = {
	id = nep_dragon.6
	title = "nep_dragon.6.name"
	desc = "nep_dragon.6.desc"
	picture = GFX_evt_space_dragon

	is_triggered_only = yes	

	fire_only_once = yes
	
	immediate = {
		random_planet = {
			limit = {
				has_planet_flag = nep_dragon_star
				}
			save_event_target_as = nep_dragon_star
			}
		create_country = {
			name = "Heptagram Dragon"
			type = nep_dragon_country
			auto_delete = no
			effect = {
				establish_communications_no_message = root.owner
			}
		}
		create_fleet = {
			name = "Pentacles"
			settings = {
				spawn_debris = no 
			}
			set_owner = last_created
			create_ship = {
				name = "Heptagram Dragon"
				design = "Heptagram Dragon"
			}
			while = {
				count = 100
				create_ship = {
					name = "summoned babys"
					design = "summoned babys"
				}
			}
			set_location = event_target:nep_dragon_star
			set_formation_scale = 2.0
			set_fleet_stance = aggressive
			set_aggro_range = 500
			set_aggro_range_measure_from = self
		}
	}
	option = {
		name = nep_dragon.6.a
		create_point_of_interest = {
			id = nep_dragon_system_poi.1
			name = "nep_dragon_system_poi_name"
			desc = "nep_dragon_system_poi_desc"
			event_chain = nep_dragon_chain
			location = event_target:nep_dragon_star
		}
	}
}

#Buff the boss
country_event = {
	id = nep_dragon.60
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		random_owned_ship = {
			limit = {
				is_ship_size = nep_dragon
			}
			ship_event = { id = nep_dragon.61 }
			if = {
				limit =	{ is_in_combat = yes }
				root = { country_event = { id = nep_dragon.60 days = 3 } }
			}
		}
	}
}
			
ship_event = {
	id = nep_dragon.61
	hide_window = yes
				
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_hp_percentage > 0
			}
			repair_percentage = 0.25
		}
	}
}

#Get reward.ready(HIDDEN)
country_event = {
	id = nep_dragon.7
	hidden_window = yes
	fire_only_once = yes
	
	trigger = {
		is_ai = no
		has_global_flag = nep_dragon_begin
		has_country_flag = nep_dragon_founder
		event_target:nep_dragon_country = {
			num_fleets < 1
		}
	}
	
	immediate = {
		set_global_flag = nep_dragon_end
		set_country_flag = nep_dragon_summoner
		remove_global_flag = nep_dragon_begin
		remove_global_flag = nep_dragon_founder
		every_country = {
			if = {
				limit = {
					has_event_chain = "nep_dragon_chain"
				}
			end_event_chain = "nep_dragon_chain"
			}
		}
		country_event = { id = nep_dragon.8 }
	}
}

#Get reward.project
country_event = {
	id = nep_dragon.8
	title = "nep_dragon.8.name"
	desc = "nep_dragon.8.desc"
	picture = GFX_evt_space_dragon


	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_dragon_end
		has_country_flag = nep_dragon_summoner
		NOT = { any_owned_ship = { is_ship_size =  nep_dragon_reward } }
	}
	
	immediate = {
	
	}
	
	#summon
	option = {
		name = nep_dragon.8.a
		custom_tooltip = nep_dragon.8.b.tooltip
		trigger = {
			minerals >= 5000
			energy >= 40000
		}
		add_minerals = -5000
		add_energy = -40000
		enable_special_project = {
			name = "nep_dragon_summon"
			location = event_target:nep_dragon_star
			owner = ROOT
		}
	}
	
	#Maybe later
	option = {
		name = nep_dragon.8.b
		custom_tooltip = nep_dragon.8.b.tooltip
		hidden_effect = { remove_country_flag = nep_dragon_summoner }
		country_event = { id = nep_dragon.81 days = 360 }
	}
	
	#It's dangerous
	option = {
		name = nep_dragon.8.c
		hidden_effect = { remove_country_flag = nep_dragon_summoner }
	}
}

country_event = {
	id = nep_dragon.81
	hidden_window = yes

	is_triggered_only = yes
	
	immediate = {
		set_country_flag = nep_dragon_summoner
		country_event = { id = nep_dragon.8 }
	}
}

country_event = {
	id = nep_dragon.82
	hidden_window = yes

	is_triggered_only = yes
	
	trigger = {
		has_country_flag = nep_dragon_summoner
		FromFrom ={ is_ship_size = nep_dragon_reward }
	}
	
	immediate = {
		country_event = { id = nep_dragon.8 }
	}
}

planet_event = {
	id = nep_dragon.9
	title = "nep_dragon.9.name"
	desc = "nep_dragon.9.desc"
	picture = GFX_evt_space_dragon
	
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = nep_dragon_end
		any_country = {
			has_country_flag = nep_dragon_summoner
		}
	}

	immediate = {
		random_country = {
			limit = {
				has_country_flag = nep_dragon_summoner
			}
			save_event_target_as = nep_dragon_summoner
		}
		create_fleet = {
			name = "Pentacles"
			settings = {
				spawn_debris = no
			}
			set_owner = event_target:nep_dragon_summoner
			create_ship = {
				name = "Heptagram Dragon"
				design = "Heptagram Dragon Rebirth"
			}
			set_location = this
		}
	}
}